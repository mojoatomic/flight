{
  "domain": "nextjs",
  "version": "1.2.0",
  "file_patterns": [
    "app/**/*.tsx",
    "app/**/*.ts",
    "app/*.tsx",
    "app/*.ts"
  ],
  "exclude_patterns": [
    "**/node_modules/**",
    "**/dist/**",
    "**/build/**",
    "**/.next/**",
    "**/.git/**"
  ],
  "provenance": {
    "last_full_audit": "2026-01-23",
    "audited_by": "flight-research",
    "next_audit_due": "2026-07-23"
  },
  "rules": [
    {
      "id": "N3",
      "title": "useEffect Fetch for Initial Page Data",
      "severity": "NEVER",
      "type": "ast",
      "language": "typescript",
      "pattern": null,
      "query": "(call_expression\n  function: (identifier) @fn\n  arguments: (arguments\n    (arrow_function\n      body: (statement_block) @body))\n  (#eq? @fn \"useEffect\")\n  (#match? @body \"\\\\bfetch\\\\s*\\\\(|\\\\baxios\\\\.\")) @violation",
      "message": "Don't use useEffect to fetch initial page data. Server components can fetch data directly, avoiding the extra round trip.",
      "provenance": {
        "last_verified": "2026-01-16",
        "confidence": "high",
        "re_verify_after": "2027-01-16"
      }
    },
    {
      "id": "N6",
      "title": "Hardcoded Multi-segment Routes",
      "severity": "NEVER",
      "type": "ast",
      "language": "typescript",
      "pattern": null,
      "query": "; Match JSX href attributes with multi-segment paths\n(jsx_attribute\n  (property_identifier) @attr\n  (string (string_fragment) @path)\n  (#eq? @attr \"href\")\n  (#match? @path \"^/[^/]+/[^/]+/\")) @violation\n\n; Match router.push() calls with multi-segment paths\n(call_expression\n  function: (member_expression\n    property: (property_identifier) @method)\n  arguments: (arguments\n    (string (string_fragment) @path2))\n  (#eq? @method \"push\")\n  (#match? @path2 \"^/[^/]+/[^/]+/\")) @violation",
      "message": "Hardcoded route strings with multiple segments are fragile. Use centralized route constants for maintainability.",
      "provenance": {
        "last_verified": "2026-01-16",
        "confidence": "medium",
        "re_verify_after": "2026-07-16"
      }
    },
    {
      "id": "N7",
      "title": "console.log in App Directory",
      "severity": "NEVER",
      "type": "ast",
      "language": "typescript",
      "pattern": null,
      "query": "(call_expression\n  function: (member_expression\n    object: (identifier) @obj\n    property: (property_identifier) @prop)\n  (#eq? @obj \"console\")\n  (#eq? @prop \"log\")) @violation",
      "message": "Console statements in production code indicate incomplete development or forgotten debugging. Remove before deploying.",
      "provenance": {
        "last_verified": "2026-01-16",
        "confidence": "high",
        "re_verify_after": "2027-01-16"
      }
    }
  ]
}