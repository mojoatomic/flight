# Task 001: flight-lint Project Scaffold

## Depends On
- None (first task)

## Delivers
- `flight-lint/` directory with Node.js project structure
- `package.json` with dependencies (tree-sitter, chalk, fast-glob)
- TypeScript configuration (`tsconfig.json`)
- Basic CLI entry point that parses arguments
- ESLint configuration for the project itself

## NOT In Scope
- Actual tree-sitter parsing (Task 002)
- Rule loading (Task 003)
- Output formatting (Task 004)
- Query execution (Task 005)
- Any domain-specific logic

## Acceptance Criteria
- [ ] `cd flight-lint && npm install` succeeds
- [ ] `npm run build` compiles TypeScript without errors
- [ ] `./bin/flight-lint --help` shows usage information
- [ ] `./bin/flight-lint --version` shows version
- [ ] `npm run lint` passes (ESLint configured)
- [ ] Project structure matches spec below
- [ ] `.flight/validate-all.sh` passes

## Domain Constraints
Load these before starting:
- code-hygiene.md (always)
- typescript.md
- javascript.md

## Context

This is a new Node.js CLI tool that will live in the Flight repository. It will eventually replace the per-domain `.validate.sh` scripts with a universal AST-based linter.

The tool consumes `.rules.json` files (generated by `flight-domain-compile`) and validates source code using tree-sitter AST queries.

## Technical Notes

### Project Structure

```
flight-lint/
├── package.json
├── tsconfig.json
├── .eslintrc.json
├── bin/
│   └── flight-lint              # Executable entry point (shebang)
├── src/
│   ├── index.ts                 # Main exports
│   ├── cli.ts                   # Argument parsing (commander or yargs)
│   └── types.ts                 # TypeScript type definitions
└── test/
    └── cli.test.ts              # Basic CLI tests
```

### package.json Dependencies

```json
{
  "name": "flight-lint",
  "version": "0.1.0",
  "type": "module",
  "bin": {
    "flight-lint": "./bin/flight-lint"
  },
  "scripts": {
    "build": "tsc",
    "lint": "eslint src/",
    "test": "node --test"
  },
  "dependencies": {
    "tree-sitter": "^0.25.0",
    "fast-glob": "^3.3.0",
    "chalk": "^5.3.0",
    "commander": "^12.0.0"
  },
  "devDependencies": {
    "@types/node": "^22.0.0",
    "typescript": "^5.7.0",
    "eslint": "^9.0.0",
    "@eslint/js": "^9.0.0",
    "typescript-eslint": "^8.0.0"
  }
}
```

### CLI Arguments (for --help output)

```
Usage: flight-lint [options] <rules-files...> [target-paths...]

Arguments:
  rules-files          One or more .rules.json files
  target-paths         Files or directories to lint (default: .)

Options:
  -V, --version        output the version number
  --auto               Auto-discover .rules.json files in .flight/domains/
  --format <type>      Output format: pretty, json, sarif (default: pretty)
  --severity <level>   Minimum severity: NEVER, MUST, SHOULD (default: SHOULD)
  -h, --help           display help for command
```

### bin/flight-lint

```bash
#!/usr/bin/env node
import('../dist/cli.js').then(m => m.main());
```

## Validation
Run after implementing:
```bash
cd flight-lint
npm install
npm run build
npm run lint
./bin/flight-lint --help
./bin/flight-lint --version
cd ..
.flight/validate-all.sh
```
